<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weather Prediction Simulator | G7 C5 W2</title>
  <style>
    :root {
      --primary: #7C3AED;
      --primary-light: #EDE9FE;
      --primary-dark: #6D28D9;
      --secondary: #0891B2;
      --warm: #F97316;
      --cold: #06B6D4;
      --storm: #DC2626;
      --bg: #FAF5FF;
      --text: #1E293B;
      --text-muted: #64748B;
      --success: #10B981;
      --warning: #F59E0B;
      --surface: #FFFFFF;
      --border: #CBD5E1;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 12px;
    }

    header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      padding: 14px;
      border-radius: 12px;
      margin-bottom: 14px;
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
    }

    header h1 {
      font-size: clamp(1.3em, 3.5vw, 1.7em);
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    header .icon { font-size: 1.1em; }

    header .subtitle {
      opacity: 0.95;
      font-size: 1.05em;
    }

    header .meta {
      display: flex;
      gap: 16px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    header .meta span {
      background: rgba(255, 255, 255, 0.2);
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.85em;
    }

    /* Instructions */
    details.instructions {
      background: var(--surface);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      border: 1px solid var(--border);
    }

    details.instructions summary {
      font-weight: 600;
      font-size: 1.1em;
      cursor: pointer;
      color: var(--primary);
      list-style: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    details.instructions summary::-webkit-details-marker { display: none; }

    details.instructions summary::before {
      content: '‚ñ∂';
      font-size: 0.7em;
      transition: transform 0.2s;
    }

    details.instructions[open] summary::before {
      transform: rotate(90deg);
    }

    details.instructions .content {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid var(--border);
    }

    details.instructions ol { margin-left: 20px; }
    details.instructions li { margin-bottom: 8px; }

    /* Scenario Selection */
    .scenario-section {
      background: var(--surface);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      border: 1px solid var(--border);
    }

    .scenario-section h2 {
      font-size: 1.2em;
      color: var(--primary);
      margin-bottom: 16px;
    }

    .scenario-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
    }

    .scenario-card {
      padding: 20px;
      border: 2px solid var(--border);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      background: var(--surface);
    }

    .scenario-card:hover {
      border-color: var(--primary);
      background: var(--primary-light);
    }

    .scenario-card:focus {
      outline: 3px solid var(--primary);
      outline-offset: 2px;
    }

    .scenario-card.selected {
      border-color: var(--primary);
      background: var(--primary);
      color: white;
    }

    .scenario-card.selected .scenario-desc {
      color: rgba(255, 255, 255, 0.9);
    }

    .scenario-card .scenario-icon {
      font-size: 2em;
      margin-bottom: 8px;
    }

    .scenario-card h3 {
      font-size: 1em;
      margin-bottom: 4px;
    }

    .scenario-card .scenario-desc {
      font-size: 0.85em;
      color: var(--text-muted);
    }

    /* Data Dashboard */
    .dashboard {
      display: grid;
      grid-template-columns: 1fr 300px;
      gap: 24px;
      margin-bottom: 24px;
    }

    .data-panel {
      background: var(--surface);
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      border: 1px solid var(--border);
      overflow: hidden;
    }

    .panel-header {
      background: var(--primary-light);
      padding: 12px 20px;
      border-bottom: 1px solid var(--border);
    }

    .panel-header h2 {
      font-size: 1em;
      color: var(--primary-dark);
    }

    .panel-content {
      padding: 20px;
    }

    /* Weather Data Chart */
    .chart-container {
      height: 280px;
      position: relative;
      margin-bottom: 16px;
    }

    #dataChart {
      width: 100%;
      height: 100%;
    }

    .chart-legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.85em;
    }

    .legend-color {
      width: 16px;
      height: 4px;
      border-radius: 2px;
    }

    .legend-color.temp { background: var(--warm); }
    .legend-color.pressure { background: var(--primary); }
    .legend-color.humidity { background: var(--secondary); }

    /* Data Table */
    .data-table-container {
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid var(--border);
      border-radius: 8px;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85em;
    }

    .data-table th,
    .data-table td {
      padding: 10px 12px;
      text-align: center;
      border-bottom: 1px solid var(--border);
    }

    .data-table th {
      background: var(--primary-light);
      font-weight: 600;
      color: var(--primary-dark);
      position: sticky;
      top: 0;
    }

    .data-table tr:last-child td { border-bottom: none; }

    .data-table tr:hover td { background: var(--bg); }

    .trend-up { color: var(--warm); }
    .trend-down { color: var(--cold); }
    .trend-stable { color: var(--text-muted); }

    /* Prediction Panel */
    .prediction-panel {
      background: var(--surface);
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      border: 1px solid var(--border);
    }

    .prediction-header {
      background: var(--primary-light);
      padding: 12px 20px;
      border-bottom: 1px solid var(--border);
    }

    .prediction-header h2 {
      font-size: 1em;
      color: var(--primary-dark);
    }

    .prediction-content {
      padding: 20px;
    }

    .prediction-group {
      margin-bottom: 20px;
    }

    .prediction-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 0.9em;
    }

    .prediction-select {
      width: 100%;
      padding: 12px;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-size: 0.95em;
      background: var(--surface);
      cursor: pointer;
    }

    .prediction-select:focus {
      outline: none;
      border-color: var(--primary);
    }

    .confidence-slider {
      width: 100%;
      margin-top: 8px;
    }

    .confidence-value {
      text-align: center;
      font-weight: 600;
      color: var(--primary);
      margin-top: 4px;
    }

    .submit-prediction {
      width: 100%;
      padding: 14px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
      margin-top: 16px;
    }

    .submit-prediction:hover { background: var(--primary-dark); }

    .submit-prediction:focus {
      outline: 3px solid var(--primary);
      outline-offset: 2px;
    }

    .submit-prediction:disabled {
      background: var(--border);
      cursor: not-allowed;
    }

    /* Results Panel */
    .results-panel {
      background: var(--surface);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      border: 1px solid var(--border);
      display: none;
    }

    .results-panel.show { display: block; }

    .results-panel h2 {
      font-size: 1.2em;
      color: var(--primary);
      margin-bottom: 16px;
    }

    .result-comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .result-card {
      padding: 20px;
      border-radius: 12px;
      text-align: center;
    }

    .result-card.prediction {
      background: var(--primary-light);
      border: 2px solid var(--primary);
    }

    .result-card.actual {
      background: #D1FAE5;
      border: 2px solid var(--success);
    }

    .result-card h3 {
      font-size: 0.9em;
      margin-bottom: 12px;
      color: var(--text-muted);
    }

    .result-card .weather-icon {
      font-size: 3em;
      margin-bottom: 8px;
    }

    .result-card .weather-name {
      font-size: 1.1em;
      font-weight: 600;
    }

    .accuracy-display {
      text-align: center;
      padding: 20px;
      background: var(--bg);
      border-radius: 12px;
    }

    .accuracy-label {
      font-size: 0.9em;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .accuracy-score {
      font-size: 2.5em;
      font-weight: 700;
    }

    .accuracy-score.high { color: var(--success); }
    .accuracy-score.medium { color: var(--warning); }
    .accuracy-score.low { color: var(--storm); }

    .feedback-text {
      margin-top: 16px;
      padding: 16px;
      border-radius: 8px;
      font-size: 0.95em;
      line-height: 1.7;
    }

    .feedback-text.success {
      background: #D1FAE5;
      color: #065F46;
      border-left: 4px solid var(--success);
    }

    .feedback-text.partial {
      background: #FEF3C7;
      color: #92400E;
      border-left: 4px solid var(--warning);
    }

    .feedback-text.incorrect {
      background: #FEE2E2;
      color: #991B1B;
      border-left: 4px solid var(--storm);
    }

    .try-again-btn {
      margin-top: 16px;
      padding: 12px 24px;
      background: var(--primary-light);
      color: var(--primary);
      border: 2px solid var(--primary);
      border-radius: 8px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .try-again-btn:hover {
      background: var(--primary);
      color: white;
    }

    /* Pattern Recognition Section */
    .patterns-section {
      background: var(--surface);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      border: 1px solid var(--border);
    }

    .patterns-section h2 {
      font-size: 1.2em;
      color: var(--primary);
      margin-bottom: 16px;
    }

    .patterns-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
    }

    .pattern-card {
      background: var(--primary-light);
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid var(--primary);
    }

    .pattern-card h3 {
      font-size: 1em;
      color: var(--primary-dark);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pattern-card p {
      font-size: 0.9em;
      color: var(--text);
    }

    .pattern-card.storm {
      background: #FEE2E2;
      border-left-color: var(--storm);
    }
    .pattern-card.storm h3 { color: #991B1B; }

    .pattern-card.clear {
      background: #FEF3C7;
      border-left-color: var(--warning);
    }
    .pattern-card.clear h3 { color: #92400E; }

    .pattern-card.rain {
      background: #E0F2FE;
      border-left-color: var(--secondary);
    }
    .pattern-card.rain h3 { color: #0E7490; }

    /* Quiz Section */
    .quiz-section {
      background: var(--surface);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      border: 1px solid var(--border);
    }

    .quiz-section h2 {
      font-size: 1.2em;
      color: var(--primary);
      margin-bottom: 20px;
    }

    .quiz-question {
      margin-bottom: 24px;
      padding-bottom: 24px;
      border-bottom: 1px solid var(--border);
    }

    .quiz-question:last-of-type {
      margin-bottom: 0;
      padding-bottom: 0;
      border-bottom: none;
    }

    .quiz-question p {
      font-weight: 600;
      margin-bottom: 12px;
    }

    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .quiz-option {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: var(--bg);
      border: 2px solid var(--border);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .quiz-option:hover {
      border-color: var(--primary);
      background: var(--primary-light);
    }

    .quiz-option:focus-within {
      outline: 3px solid var(--primary);
      outline-offset: 2px;
    }

    .quiz-option input[type="radio"] {
      width: 18px;
      height: 18px;
      accent-color: var(--primary);
    }

    .quiz-option.correct {
      border-color: var(--success);
      background: #D1FAE5;
    }

    .quiz-option.incorrect {
      border-color: var(--storm);
      background: #FEE2E2;
    }

    .quiz-feedback {
      margin-top: 12px;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 0.95em;
      display: none;
    }

    .quiz-feedback.show { display: block; }

    .quiz-feedback.correct {
      background: #D1FAE5;
      color: #065F46;
      border-left: 4px solid var(--success);
    }

    .quiz-feedback.incorrect {
      background: #FEE2E2;
      color: #991B1B;
      border-left: 4px solid var(--storm);
    }

    .quiz-submit {
      margin-top: 20px;
      padding: 14px 28px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .quiz-submit:hover { background: var(--primary-dark); }

    .quiz-submit:focus {
      outline: 3px solid var(--primary);
      outline-offset: 2px;
    }

    .quiz-score {
      margin-top: 20px;
      padding: 16px;
      background: var(--primary-light);
      border-radius: 8px;
      text-align: center;
      font-weight: 600;
      color: var(--primary-dark);
      display: none;
    }

    .quiz-score.show { display: block; }

    /* Footer */
    footer {
      text-align: center;
      padding: 20px;
      color: var(--text-muted);
      font-size: 0.85em;
    }

    /* Responsive Design */
    @media (max-width: 900px) {
      .dashboard {
        grid-template-columns: 1fr;
      }

      .result-comparison {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 700px) {
      .container { padding: 12px; }

      header { padding: 16px; }
      header h1 { font-size: 1.4em; }

      .scenario-grid {
        grid-template-columns: 1fr;
      }

      .chart-container {
        height: 220px;
      }
    }

    @media (max-width: 500px) {
      header .meta {
        flex-direction: column;
        gap: 8px;
      }

      .patterns-grid {
        grid-template-columns: 1fr;
      }

      .data-table {
        font-size: 0.75em;
      }

      .data-table th,
      .data-table td {
        padding: 8px 6px;
      }
    }

    /* Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation: none !important;
        transition: none !important;
      }
    }

    /* Screen Reader Only */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><span class="icon" aria-hidden="true">‚õàÔ∏è</span> Weather Prediction Simulator</h1>
      <div class="subtitle">Analyze weather data and make forecasts like a meteorologist</div>
      <div class="meta">
        <span>Grade 7 Cycle 5 Week 2</span>
        <span>MS-ESS2-5</span>
        <span>Station 3: Build Your Forecast</span>
      </div>
    </header>

    <details class="instructions" open>
      <summary>How to Use This Simulator</summary>
      <div class="content">
        <ol>
          <li><strong>Choose a weather scenario:</strong> Select one of the scenarios below to load 5 days of weather data.</li>
          <li><strong>Analyze the data:</strong> Look at the temperature, pressure, and humidity trends in the chart and table.</li>
          <li><strong>Identify patterns:</strong> Use the pattern recognition guide to understand what the data suggests.</li>
          <li><strong>Make your prediction:</strong> Based on your analysis, predict what weather will occur on Day 6.</li>
          <li><strong>Check your accuracy:</strong> Submit your prediction to see how accurate your forecast was!</li>
        </ol>
      </div>
    </details>

    <section class="scenario-section">
      <h2>Select a Weather Scenario</h2>
      <div class="scenario-grid" role="radiogroup" aria-label="Weather scenario selection">
        <div class="scenario-card" tabindex="0" role="radio" aria-checked="false" data-scenario="cold-front">
          <div class="scenario-icon" aria-hidden="true">üå¨Ô∏è</div>
          <h3>Cold Front Approaching</h3>
          <p class="scenario-desc">Midwest region, early spring</p>
        </div>
        <div class="scenario-card" tabindex="0" role="radio" aria-checked="false" data-scenario="warm-front">
          <div class="scenario-icon" aria-hidden="true">‚òÄÔ∏è</div>
          <h3>Warm Front Moving In</h3>
          <p class="scenario-desc">Southeast coast, late winter</p>
        </div>
        <div class="scenario-card" tabindex="0" role="radio" aria-checked="false" data-scenario="severe-storm">
          <div class="scenario-icon" aria-hidden="true">‚õàÔ∏è</div>
          <h3>Severe Storm Development</h3>
          <p class="scenario-desc">Central plains, spring</p>
        </div>
        <div class="scenario-card" tabindex="0" role="radio" aria-checked="false" data-scenario="high-pressure">
          <div class="scenario-icon" aria-hidden="true">üå§Ô∏è</div>
          <h3>High Pressure System</h3>
          <p class="scenario-desc">Southwest region, summer</p>
        </div>
      </div>
    </section>

    <div class="dashboard">
      <div class="data-panel">
        <div class="panel-header">
          <h2>5-Day Weather Data</h2>
        </div>
        <div class="panel-content">
          <div class="chart-container">
            <canvas id="dataChart" aria-label="Weather data chart showing temperature, pressure, and humidity over 5 days"></canvas>
          </div>
          <div class="chart-legend">
            <div class="legend-item">
              <div class="legend-color temp"></div>
              <span>Temperature (¬∞F)</span>
            </div>
            <div class="legend-item">
              <div class="legend-color pressure"></div>
              <span>Pressure (mb - 950)</span>
            </div>
            <div class="legend-item">
              <div class="legend-color humidity"></div>
              <span>Humidity (%)</span>
            </div>
          </div>

          <div class="data-table-container" style="margin-top: 20px;">
            <table class="data-table" id="dataTable">
              <thead>
                <tr>
                  <th>Day</th>
                  <th>Temp (¬∞F)</th>
                  <th>Pressure (mb)</th>
                  <th>Humidity (%)</th>
                  <th>Wind</th>
                  <th>Trend</th>
                </tr>
              </thead>
              <tbody id="tableBody">
                <tr>
                  <td colspan="6" style="color: var(--text-muted); font-style: italic;">Select a scenario to load data</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <aside class="prediction-panel">
        <div class="prediction-header">
          <h2>Your Day 6 Prediction</h2>
        </div>
        <div class="prediction-content">
          <div class="prediction-group">
            <label for="weather-prediction">Predicted Weather:</label>
            <select id="weather-prediction" class="prediction-select" disabled>
              <option value="">-- Select weather type --</option>
              <option value="clear">‚òÄÔ∏è Clear/Sunny</option>
              <option value="partly-cloudy">‚õÖ Partly Cloudy</option>
              <option value="cloudy">‚òÅÔ∏è Cloudy</option>
              <option value="rain">üåßÔ∏è Rain</option>
              <option value="heavy-rain">üåßÔ∏è Heavy Rain</option>
              <option value="thunderstorm">‚õàÔ∏è Thunderstorm</option>
              <option value="severe-storm">üå™Ô∏è Severe Storm</option>
            </select>
          </div>

          <div class="prediction-group">
            <label for="temp-prediction">Predicted Temperature:</label>
            <select id="temp-prediction" class="prediction-select" disabled>
              <option value="">-- Select temperature trend --</option>
              <option value="much-warmer">Much warmer (+15¬∞F or more)</option>
              <option value="warmer">Warmer (+5-15¬∞F)</option>
              <option value="similar">Similar (within 5¬∞F)</option>
              <option value="cooler">Cooler (-5-15¬∞F)</option>
              <option value="much-cooler">Much cooler (-15¬∞F or more)</option>
            </select>
          </div>

          <div class="prediction-group">
            <label for="confidence">Your Confidence Level:</label>
            <input type="range" id="confidence" class="confidence-slider" min="0" max="100" value="50" disabled>
            <div class="confidence-value" id="confidenceValue">50%</div>
          </div>

          <button class="submit-prediction" id="submitPrediction" disabled>Submit Prediction</button>
        </div>
      </aside>
    </div>

    <section class="results-panel" id="resultsPanel" aria-live="polite">
      <h2>Forecast Results</h2>
      <div class="result-comparison">
        <div class="result-card prediction">
          <h3>Your Prediction</h3>
          <div class="weather-icon" id="predictedIcon">--</div>
          <div class="weather-name" id="predictedName">--</div>
        </div>
        <div class="result-card actual">
          <h3>Actual Weather</h3>
          <div class="weather-icon" id="actualIcon">--</div>
          <div class="weather-name" id="actualName">--</div>
        </div>
      </div>
      <div class="accuracy-display">
        <div class="accuracy-label">Forecast Accuracy</div>
        <div class="accuracy-score" id="accuracyScore">--</div>
      </div>
      <div class="feedback-text" id="feedbackText"></div>
      <button class="try-again-btn" id="tryAgainBtn">Try Another Scenario</button>
    </section>

    <section class="patterns-section">
      <h2>Weather Pattern Recognition Guide</h2>
      <div class="patterns-grid">
        <div class="pattern-card storm">
          <h3>‚õàÔ∏è Storm Approaching</h3>
          <p><strong>Pressure:</strong> Falling rapidly (drops 5+ mb/day)<br>
          <strong>Humidity:</strong> Rising above 70%<br>
          <strong>Temperature:</strong> May fluctuate before storm<br>
          <strong>Wind:</strong> Increasing, often from south/southwest</p>
        </div>
        <div class="pattern-card clear">
          <h3>‚òÄÔ∏è Fair Weather Ahead</h3>
          <p><strong>Pressure:</strong> Rising or stable (above 1015 mb)<br>
          <strong>Humidity:</strong> Dropping below 50%<br>
          <strong>Temperature:</strong> Stable day-to-day<br>
          <strong>Wind:</strong> Light, often from north/northwest</p>
        </div>
        <div class="pattern-card rain">
          <h3>üåßÔ∏è Rain Expected</h3>
          <p><strong>Pressure:</strong> Falling steadily (2-4 mb/day)<br>
          <strong>Humidity:</strong> Rising toward 80%+<br>
          <strong>Temperature:</strong> Often cooling with warm front<br>
          <strong>Wind:</strong> Moderate, shifting direction</p>
        </div>
        <div class="pattern-card">
          <h3>üìä Key Insight</h3>
          <p>Meteorologists don't just look at single values‚Äîthey look at <strong>TRENDS</strong> over time. A pressure of 1010 mb might mean nothing alone, but if it dropped from 1025 mb over 3 days, that's a strong storm signal!</p>
        </div>
      </div>
    </section>

    <section class="quiz-section" aria-labelledby="quiz-heading">
      <h2 id="quiz-heading">Check Your Understanding</h2>

      <div class="quiz-question" data-question="1">
        <p>1. A meteorologist notices that barometric pressure has dropped from 1020 mb to 1005 mb over the past 3 days. What does this data suggest?</p>
        <div class="quiz-options">
          <label class="quiz-option">
            <input type="radio" name="q1" value="a">
            <span>Fair weather is likely to continue</span>
          </label>
          <label class="quiz-option">
            <input type="radio" name="q1" value="b">
            <span>A storm system is likely approaching</span>
          </label>
          <label class="quiz-option">
            <input type="radio" name="q1" value="c">
            <span>Temperature will definitely increase</span>
          </label>
          <label class="quiz-option">
            <input type="radio" name="q1" value="d">
            <span>Humidity will drop significantly</span>
          </label>
        </div>
        <div class="quiz-feedback" id="feedback1"></div>
      </div>

      <div class="quiz-question" data-question="2">
        <p>2. Why do meteorologists use data from multiple sources (satellites, radar, weather stations) instead of just one?</p>
        <div class="quiz-options">
          <label class="quiz-option">
            <input type="radio" name="q2" value="a">
            <span>Because weather predictions are just guesses anyway</span>
          </label>
          <label class="quiz-option">
            <input type="radio" name="q2" value="b">
            <span>Because different tools measure different aspects of weather, giving a more complete picture</span>
          </label>
          <label class="quiz-option">
            <input type="radio" name="q2" value="c">
            <span>Because one source is always wrong</span>
          </label>
          <label class="quiz-option">
            <input type="radio" name="q2" value="d">
            <span>Because the government requires it</span>
          </label>
        </div>
        <div class="quiz-feedback" id="feedback2"></div>
      </div>

      <div class="quiz-question" data-question="3">
        <p>3. What is the key difference between weather and climate?</p>
        <div class="quiz-options">
          <label class="quiz-option">
            <input type="radio" name="q3" value="a">
            <span>Weather is hot, climate is cold</span>
          </label>
          <label class="quiz-option">
            <input type="radio" name="q3" value="b">
            <span>Weather is the day-to-day conditions; climate is the average pattern over many years</span>
          </label>
          <label class="quiz-option">
            <input type="radio" name="q3" value="c">
            <span>Weather happens in the atmosphere; climate happens in space</span>
          </label>
          <label class="quiz-option">
            <input type="radio" name="q3" value="d">
            <span>There is no difference‚Äîthey mean the same thing</span>
          </label>
        </div>
        <div class="quiz-feedback" id="feedback3"></div>
      </div>

      <button class="quiz-submit" id="submitQuiz">Check Answers</button>
      <div class="quiz-score" id="quizScore"></div>
    </section>

    <footer>
      <p>Grade 7 Cycle 5 Week 2 | Weather Prediction Simulator | MS-ESS2-5</p>
      <p>KAMS Science Department</p>
    </footer>
  </div>

  <script>
    // Weather scenario data
    const scenarios = {
      'cold-front': {
        name: 'Cold Front Approaching',
        data: [
          { day: 1, temp: 72, pressure: 1018, humidity: 45, wind: 'S 8 mph' },
          { day: 2, temp: 75, pressure: 1015, humidity: 52, wind: 'S 12 mph' },
          { day: 3, temp: 78, pressure: 1010, humidity: 65, wind: 'SW 15 mph' },
          { day: 4, temp: 74, pressure: 1004, humidity: 78, wind: 'SW 18 mph' },
          { day: 5, temp: 68, pressure: 998, humidity: 85, wind: 'W 22 mph' }
        ],
        actual: {
          weather: 'thunderstorm',
          temp: 'much-cooler',
          icon: '‚õàÔ∏è',
          name: 'Thunderstorms, then clearing'
        }
      },
      'warm-front': {
        name: 'Warm Front Moving In',
        data: [
          { day: 1, temp: 42, pressure: 1022, humidity: 55, wind: 'NE 6 mph' },
          { day: 2, temp: 45, pressure: 1019, humidity: 62, wind: 'E 8 mph' },
          { day: 3, temp: 48, pressure: 1015, humidity: 70, wind: 'SE 10 mph' },
          { day: 4, temp: 52, pressure: 1012, humidity: 75, wind: 'S 12 mph' },
          { day: 5, temp: 55, pressure: 1010, humidity: 80, wind: 'S 10 mph' }
        ],
        actual: {
          weather: 'rain',
          temp: 'warmer',
          icon: 'üåßÔ∏è',
          name: 'Light rain, warmer'
        }
      },
      'severe-storm': {
        name: 'Severe Storm Development',
        data: [
          { day: 1, temp: 78, pressure: 1012, humidity: 72, wind: 'S 15 mph' },
          { day: 2, temp: 82, pressure: 1006, humidity: 78, wind: 'S 20 mph' },
          { day: 3, temp: 85, pressure: 998, humidity: 82, wind: 'SW 25 mph' },
          { day: 4, temp: 84, pressure: 990, humidity: 88, wind: 'SW 30 mph' },
          { day: 5, temp: 80, pressure: 985, humidity: 92, wind: 'W 35 mph' }
        ],
        actual: {
          weather: 'severe-storm',
          temp: 'much-cooler',
          icon: 'üå™Ô∏è',
          name: 'Severe thunderstorms'
        }
      },
      'high-pressure': {
        name: 'High Pressure System',
        data: [
          { day: 1, temp: 88, pressure: 1018, humidity: 35, wind: 'N 5 mph' },
          { day: 2, temp: 90, pressure: 1020, humidity: 32, wind: 'NW 4 mph' },
          { day: 3, temp: 92, pressure: 1022, humidity: 28, wind: 'N 3 mph' },
          { day: 4, temp: 94, pressure: 1024, humidity: 25, wind: 'NE 4 mph' },
          { day: 5, temp: 95, pressure: 1025, humidity: 22, wind: 'E 5 mph' }
        ],
        actual: {
          weather: 'clear',
          temp: 'similar',
          icon: '‚òÄÔ∏è',
          name: 'Clear and hot'
        }
      }
    };

    const weatherIcons = {
      'clear': '‚òÄÔ∏è',
      'partly-cloudy': '‚õÖ',
      'cloudy': '‚òÅÔ∏è',
      'rain': 'üåßÔ∏è',
      'heavy-rain': 'üåßÔ∏è',
      'thunderstorm': '‚õàÔ∏è',
      'severe-storm': 'üå™Ô∏è'
    };

    const weatherNames = {
      'clear': 'Clear/Sunny',
      'partly-cloudy': 'Partly Cloudy',
      'cloudy': 'Cloudy',
      'rain': 'Rain',
      'heavy-rain': 'Heavy Rain',
      'thunderstorm': 'Thunderstorm',
      'severe-storm': 'Severe Storm'
    };

    // State
    let selectedScenario = null;
    let canvas, ctx;

    // DOM Elements
    const scenarioCards = document.querySelectorAll('.scenario-card');
    const weatherPrediction = document.getElementById('weather-prediction');
    const tempPrediction = document.getElementById('temp-prediction');
    const confidence = document.getElementById('confidence');
    const confidenceValue = document.getElementById('confidenceValue');
    const submitPrediction = document.getElementById('submitPrediction');
    const resultsPanel = document.getElementById('resultsPanel');
    const tableBody = document.getElementById('tableBody');

    // Initialize canvas
    function initCanvas() {
      canvas = document.getElementById('dataChart');
      ctx = canvas.getContext('2d');

      const container = canvas.parentElement;
      canvas.width = container.clientWidth * window.devicePixelRatio;
      canvas.height = container.clientHeight * window.devicePixelRatio;
      ctx.scale(window.devicePixelRatio, window.devicePixelRatio);

      drawEmptyChart();
    }

    // Draw empty chart
    function drawEmptyChart() {
      const width = canvas.width / window.devicePixelRatio;
      const height = canvas.height / window.devicePixelRatio;

      ctx.clearRect(0, 0, width, height);

      // Draw axes
      ctx.strokeStyle = '#CBD5E1';
      ctx.lineWidth = 1;

      // Y-axis
      ctx.beginPath();
      ctx.moveTo(50, 20);
      ctx.lineTo(50, height - 40);
      ctx.stroke();

      // X-axis
      ctx.beginPath();
      ctx.moveTo(50, height - 40);
      ctx.lineTo(width - 20, height - 40);
      ctx.stroke();

      // Placeholder text
      ctx.fillStyle = '#64748B';
      ctx.font = '14px -apple-system, BlinkMacSystemFont, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Select a scenario to view data', width / 2, height / 2);
    }

    // Draw data chart
    function drawChart(data) {
      const width = canvas.width / window.devicePixelRatio;
      const height = canvas.height / window.devicePixelRatio;
      const padding = { top: 30, right: 20, bottom: 50, left: 60 };
      const chartWidth = width - padding.left - padding.right;
      const chartHeight = height - padding.top - padding.bottom;

      ctx.clearRect(0, 0, width, height);

      // Draw grid lines
      ctx.strokeStyle = '#E2E8F0';
      ctx.lineWidth = 1;

      for (let i = 0; i <= 5; i++) {
        const y = padding.top + (chartHeight / 5) * i;
        ctx.beginPath();
        ctx.moveTo(padding.left, y);
        ctx.lineTo(width - padding.right, y);
        ctx.stroke();
      }

      // Draw axes
      ctx.strokeStyle = '#94A3B8';
      ctx.lineWidth = 2;

      // Y-axis
      ctx.beginPath();
      ctx.moveTo(padding.left, padding.top);
      ctx.lineTo(padding.left, height - padding.bottom);
      ctx.stroke();

      // X-axis
      ctx.beginPath();
      ctx.moveTo(padding.left, height - padding.bottom);
      ctx.lineTo(width - padding.right, height - padding.bottom);
      ctx.stroke();

      // X-axis labels (Days)
      ctx.fillStyle = '#64748B';
      ctx.font = '12px -apple-system, BlinkMacSystemFont, sans-serif';
      ctx.textAlign = 'center';

      data.forEach((d, i) => {
        const x = padding.left + (chartWidth / (data.length - 1)) * i;
        ctx.fillText(`Day ${d.day}`, x, height - padding.bottom + 20);
      });

      // Y-axis label
      ctx.save();
      ctx.translate(15, height / 2);
      ctx.rotate(-Math.PI / 2);
      ctx.textAlign = 'center';
      ctx.fillText('Value (normalized)', 0, 0);
      ctx.restore();

      // Scale functions
      const xScale = (i) => padding.left + (chartWidth / (data.length - 1)) * i;
      const yScale = (val, min, max) => {
        const normalized = (val - min) / (max - min);
        return padding.top + chartHeight * (1 - normalized);
      };

      // Draw temperature line
      const temps = data.map(d => d.temp);
      const tempMin = Math.min(...temps) - 10;
      const tempMax = Math.max(...temps) + 10;

      ctx.strokeStyle = '#F97316';
      ctx.lineWidth = 3;
      ctx.beginPath();
      data.forEach((d, i) => {
        const x = xScale(i);
        const y = yScale(d.temp, tempMin, tempMax);
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      });
      ctx.stroke();

      // Draw temperature points
      ctx.fillStyle = '#F97316';
      data.forEach((d, i) => {
        const x = xScale(i);
        const y = yScale(d.temp, tempMin, tempMax);
        ctx.beginPath();
        ctx.arc(x, y, 5, 0, Math.PI * 2);
        ctx.fill();
      });

      // Draw pressure line (offset to show on same scale)
      const pressures = data.map(d => d.pressure - 950); // Normalize to 0-100 range
      ctx.strokeStyle = '#7C3AED';
      ctx.lineWidth = 3;
      ctx.beginPath();
      data.forEach((d, i) => {
        const x = xScale(i);
        const y = yScale(d.pressure - 950, 20, 80);
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      });
      ctx.stroke();

      // Draw pressure points
      ctx.fillStyle = '#7C3AED';
      data.forEach((d, i) => {
        const x = xScale(i);
        const y = yScale(d.pressure - 950, 20, 80);
        ctx.beginPath();
        ctx.arc(x, y, 5, 0, Math.PI * 2);
        ctx.fill();
      });

      // Draw humidity line
      ctx.strokeStyle = '#0891B2';
      ctx.lineWidth = 3;
      ctx.beginPath();
      data.forEach((d, i) => {
        const x = xScale(i);
        const y = yScale(d.humidity, 10, 100);
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      });
      ctx.stroke();

      // Draw humidity points
      ctx.fillStyle = '#0891B2';
      data.forEach((d, i) => {
        const x = xScale(i);
        const y = yScale(d.humidity, 10, 100);
        ctx.beginPath();
        ctx.arc(x, y, 5, 0, Math.PI * 2);
        ctx.fill();
      });
    }

    // Update data table
    function updateTable(data) {
      tableBody.innerHTML = '';

      data.forEach((d, i) => {
        const prevDay = i > 0 ? data[i - 1] : null;
        let trend = '';
        let trendClass = 'trend-stable';

        if (prevDay) {
          const pressureDiff = d.pressure - prevDay.pressure;
          if (pressureDiff < -3) {
            trend = '‚Üì Falling';
            trendClass = 'trend-down';
          } else if (pressureDiff > 3) {
            trend = '‚Üë Rising';
            trendClass = 'trend-up';
          } else {
            trend = '‚Üí Stable';
          }
        } else {
          trend = '--';
        }

        const row = document.createElement('tr');
        row.innerHTML = `
          <td><strong>Day ${d.day}</strong></td>
          <td>${d.temp}¬∞F</td>
          <td>${d.pressure} mb</td>
          <td>${d.humidity}%</td>
          <td>${d.wind}</td>
          <td class="${trendClass}">${trend}</td>
        `;
        tableBody.appendChild(row);
      });
    }

    // Select scenario
    function selectScenario(scenarioKey) {
      selectedScenario = scenarioKey;
      const scenario = scenarios[scenarioKey];

      // Update UI
      scenarioCards.forEach(card => {
        card.classList.remove('selected');
        card.setAttribute('aria-checked', 'false');
      });

      const selectedCard = document.querySelector(`[data-scenario="${scenarioKey}"]`);
      selectedCard.classList.add('selected');
      selectedCard.setAttribute('aria-checked', 'true');

      // Draw chart and table
      drawChart(scenario.data);
      updateTable(scenario.data);

      // Enable prediction controls
      weatherPrediction.disabled = false;
      tempPrediction.disabled = false;
      confidence.disabled = false;
      updateSubmitButton();

      // Hide results panel
      resultsPanel.classList.remove('show');
    }

    // Update submit button state
    function updateSubmitButton() {
      submitPrediction.disabled = !selectedScenario || !weatherPrediction.value || !tempPrediction.value;
    }

    // Calculate accuracy
    function calculateAccuracy(userWeather, userTemp, actual) {
      let score = 0;
      let weatherScore = 0;
      let tempScore = 0;

      // Weather match (60% of score)
      if (userWeather === actual.weather) {
        weatherScore = 60;
      } else {
        // Partial credit for similar weather types
        const similarGroups = [
          ['clear', 'partly-cloudy'],
          ['cloudy', 'rain'],
          ['rain', 'heavy-rain'],
          ['heavy-rain', 'thunderstorm'],
          ['thunderstorm', 'severe-storm']
        ];

        for (const group of similarGroups) {
          if (group.includes(userWeather) && group.includes(actual.weather)) {
            weatherScore = 30;
            break;
          }
        }
      }

      // Temperature match (40% of score)
      if (userTemp === actual.temp) {
        tempScore = 40;
      } else {
        // Partial credit for adjacent predictions
        const tempOrder = ['much-warmer', 'warmer', 'similar', 'cooler', 'much-cooler'];
        const userIndex = tempOrder.indexOf(userTemp);
        const actualIndex = tempOrder.indexOf(actual.temp);
        const diff = Math.abs(userIndex - actualIndex);

        if (diff === 1) tempScore = 25;
        else if (diff === 2) tempScore = 10;
      }

      score = weatherScore + tempScore;
      return { total: score, weatherScore, tempScore };
    }

    // Show results
    function showResults() {
      const scenario = scenarios[selectedScenario];
      const userWeather = weatherPrediction.value;
      const userTemp = tempPrediction.value;
      const userConfidence = confidence.value;

      const accuracy = calculateAccuracy(userWeather, userTemp, scenario.actual);

      // Update prediction display
      document.getElementById('predictedIcon').textContent = weatherIcons[userWeather];
      document.getElementById('predictedName').textContent = weatherNames[userWeather];

      // Update actual display
      document.getElementById('actualIcon').textContent = scenario.actual.icon;
      document.getElementById('actualName').textContent = scenario.actual.name;

      // Update accuracy display
      const accuracyScore = document.getElementById('accuracyScore');
      accuracyScore.textContent = accuracy.total + '%';
      accuracyScore.className = 'accuracy-score';

      if (accuracy.total >= 80) {
        accuracyScore.classList.add('high');
      } else if (accuracy.total >= 50) {
        accuracyScore.classList.add('medium');
      } else {
        accuracyScore.classList.add('low');
      }

      // Generate feedback
      const feedbackText = document.getElementById('feedbackText');
      let feedback = '';

      if (accuracy.total >= 80) {
        feedback = `<strong>Excellent forecast!</strong> You correctly identified the weather pattern and temperature trend. Like a real meteorologist, you used the data trends (${getKeyTrend(scenario.data)}) to make an accurate prediction.`;
        feedbackText.className = 'feedback-text success';
      } else if (accuracy.total >= 50) {
        feedback = `<strong>Good effort!</strong> You partially identified the weather pattern. `;
        if (accuracy.weatherScore < 60) {
          feedback += `The key data pattern was ${getKeyTrend(scenario.data)}, which typically indicates ${scenario.actual.name}. `;
        }
        if (accuracy.tempScore < 40) {
          feedback += `The temperature trend was ${scenario.actual.temp.replace('-', ' ')}, based on the approaching system.`;
        }
        feedbackText.className = 'feedback-text partial';
      } else {
        feedback = `<strong>Keep practicing!</strong> The key was to look at the ${getKeyTrend(scenario.data)}. ${getDataExplanation(selectedScenario)}`;
        feedbackText.className = 'feedback-text incorrect';
      }

      feedbackText.innerHTML = feedback;

      // Show results panel
      resultsPanel.classList.add('show');
      resultsPanel.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Get key trend description
    function getKeyTrend(data) {
      const pressureStart = data[0].pressure;
      const pressureEnd = data[data.length - 1].pressure;
      const pressureChange = pressureEnd - pressureStart;

      if (pressureChange < -15) return 'rapidly falling pressure (dropped ' + Math.abs(pressureChange) + ' mb)';
      if (pressureChange < -5) return 'steadily falling pressure';
      if (pressureChange > 5) return 'rising pressure';
      return 'stable pressure pattern';
    }

    // Get data explanation
    function getDataExplanation(scenario) {
      const explanations = {
        'cold-front': 'Rapidly falling pressure (from 1018 to 998 mb) combined with rising humidity (45% to 85%) and shifting winds indicates a strong cold front with thunderstorms.',
        'warm-front': 'Gradually rising temperatures and humidity with slowly falling pressure indicates a warm front bringing steady rain.',
        'severe-storm': 'Dramatically falling pressure (1012 to 985 mb) with very high humidity (92%) and strong winds signals severe storm conditions.',
        'high-pressure': 'Rising/stable high pressure (above 1020 mb) with low humidity and light winds indicates continued fair weather.'
      };
      return explanations[scenario];
    }

    // Event Listeners
    scenarioCards.forEach(card => {
      card.addEventListener('click', () => selectScenario(card.dataset.scenario));
      card.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          selectScenario(card.dataset.scenario);
        }
      });
    });

    weatherPrediction.addEventListener('change', updateSubmitButton);
    tempPrediction.addEventListener('change', updateSubmitButton);

    confidence.addEventListener('input', () => {
      confidenceValue.textContent = confidence.value + '%';
    });

    submitPrediction.addEventListener('click', showResults);

    document.getElementById('tryAgainBtn').addEventListener('click', () => {
      // Reset selections
      weatherPrediction.value = '';
      tempPrediction.value = '';
      confidence.value = 50;
      confidenceValue.textContent = '50%';

      // Hide results
      resultsPanel.classList.remove('show');

      // Scroll to scenarios
      document.querySelector('.scenario-section').scrollIntoView({ behavior: 'smooth' });
    });

    // Quiz functionality
    const quizAnswers = {
      q1: { correct: 'b', feedback: {
        correct: 'Correct! A pressure drop of 15 mb over 3 days is a significant decrease that typically indicates an approaching storm system. Meteorologists call this "falling barometric pressure."',
        incorrect: 'Not quite. When pressure drops rapidly (15 mb in 3 days is significant!), it usually means a storm system is approaching. Low pressure systems are associated with rising air, clouds, and precipitation.'
      }},
      q2: { correct: 'b', feedback: {
        correct: 'Correct! Satellites show cloud patterns from above, radar detects precipitation, weather stations measure ground conditions, and weather balloons sample the upper atmosphere. Each provides unique information that creates a complete picture.',
        incorrect: 'Not quite. Weather prediction is based on scientific data, not guesses! Different tools measure different things: satellites see clouds, radar shows rain intensity, and ground stations measure local conditions. Together, they give meteorologists a complete picture.'
      }},
      q3: { correct: 'b', feedback: {
        correct: 'Correct! Weather is what\'s happening right now or in the next few days (it\'s raining today). Climate is the long-term average pattern over 30+ years (Seattle is rainy). You can\'t determine climate from a single weather event!',
        incorrect: 'Not quite. Weather is SHORT-TERM (today\'s conditions, this week\'s forecast). Climate is LONG-TERM (average patterns over decades). Example: "It\'s snowing today" = weather. "Chicago gets cold winters" = climate.'
      }}
    };

    document.getElementById('submitQuiz').addEventListener('click', function() {
      let score = 0;
      const totalQuestions = Object.keys(quizAnswers).length;

      Object.keys(quizAnswers).forEach((qNum, index) => {
        const selected = document.querySelector(`input[name="${qNum}"]:checked`);
        const feedback = document.getElementById(`feedback${index + 1}`);
        const options = document.querySelectorAll(`input[name="${qNum}"]`);

        options.forEach(opt => {
          opt.closest('.quiz-option').classList.remove('correct', 'incorrect');
        });

        if (selected) {
          const isCorrect = selected.value === quizAnswers[qNum].correct;

          if (isCorrect) {
            score++;
            selected.closest('.quiz-option').classList.add('correct');
            feedback.textContent = quizAnswers[qNum].feedback.correct;
            feedback.className = 'quiz-feedback show correct';
          } else {
            selected.closest('.quiz-option').classList.add('incorrect');
            options.forEach(opt => {
              if (opt.value === quizAnswers[qNum].correct) {
                opt.closest('.quiz-option').classList.add('correct');
              }
            });
            feedback.textContent = quizAnswers[qNum].feedback.incorrect;
            feedback.className = 'quiz-feedback show incorrect';
          }
        } else {
          feedback.textContent = 'Please select an answer.';
          feedback.className = 'quiz-feedback show incorrect';
        }
      });

      const scoreDisplay = document.getElementById('quizScore');
      scoreDisplay.textContent = `You got ${score} out of ${totalQuestions} correct!`;
      scoreDisplay.classList.add('show');
      scoreDisplay.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    });

    // Initialize
    window.addEventListener('load', initCanvas);
    window.addEventListener('resize', () => {
      initCanvas();
      if (selectedScenario) {
        drawChart(scenarios[selectedScenario].data);
      }
    });
  </script>
</body>
</html>
