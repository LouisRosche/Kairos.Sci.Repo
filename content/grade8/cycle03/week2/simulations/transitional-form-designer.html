<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transitional Form Designer - Predict Evolution</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0F766E 0%, #134E4A 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #fff;
            margin-bottom: 10px;
            font-size: clamp(1.5em, 4vw, 2em);
        }
        .subtitle {
            text-align: center;
            color: #99F6E4;
            margin-bottom: 20px;
            font-size: 0.95em;
        }
        .sim-container {
            background: #fff;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .scenario-selector {
            background: #F0FDFA;
            border: 2px solid #14B8A6;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .scenario-selector h3 {
            color: #0F766E;
            margin-bottom: 15px;
            text-align: center;
        }
        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .scenario-card {
            background: white;
            border: 3px solid #E2E8F0;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .scenario-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        .scenario-card.selected {
            border-color: #14B8A6;
            background: #F0FDFA;
        }
        .scenario-card .title { font-weight: bold; color: #1E293B; margin-bottom: 5px; }
        .scenario-card .desc { font-size: 0.8em; color: #64748B; }
        .evolution-timeline {
            display: grid;
            grid-template-columns: 1fr auto 1fr auto 1fr;
            gap: 10px;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #F8FAFC;
            border-radius: 12px;
        }
        @media (max-width: 700px) {
            .evolution-timeline {
                grid-template-columns: 1fr;
                text-align: center;
            }
            .arrow { transform: rotate(90deg); }
        }
        .organism-box {
            background: white;
            border: 3px solid #E2E8F0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        .organism-box.ancestor { border-color: #F59E0B; background: #FFFBEB; }
        .organism-box.transitional { border-color: #8B5CF6; background: #F5F3FF; }
        .organism-box.descendant { border-color: #10B981; background: #ECFDF5; }
        .organism-box .emoji { font-size: 3em; margin-bottom: 10px; }
        .organism-box .name { font-weight: bold; color: #1E293B; }
        .organism-box .time { font-size: 0.8em; color: #64748B; margin-top: 5px; }
        .arrow {
            font-size: 2em;
            color: #94A3B8;
        }
        .designer-panel {
            background: #F5F3FF;
            border: 2px solid #8B5CF6;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .designer-panel h3 {
            color: #6D28D9;
            margin-bottom: 15px;
            text-align: center;
        }
        .trait-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
        }
        .trait-selector {
            background: white;
            border-radius: 10px;
            padding: 15px;
            border: 2px solid #E2E8F0;
        }
        .trait-selector h4 {
            color: #1E293B;
            margin-bottom: 10px;
            font-size: 0.95em;
        }
        .trait-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .trait-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border: 2px solid #E2E8F0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .trait-option:hover { background: #F8FAFC; }
        .trait-option.selected {
            border-color: #8B5CF6;
            background: #F5F3FF;
        }
        .trait-option.correct {
            border-color: #10B981;
            background: #ECFDF5;
        }
        .trait-option.incorrect {
            border-color: #EF4444;
            background: #FEF2F2;
        }
        .trait-option input { display: none; }
        .trait-icon { font-size: 1.5em; }
        .trait-label {
            flex: 1;
        }
        .trait-label .name { font-weight: 600; color: #1E293B; font-size: 0.9em; }
        .trait-label .desc { font-size: 0.75em; color: #64748B; }
        .check-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #8B5CF6, #7C3AED);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.2s;
        }
        .check-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(139, 92, 246, 0.4); }
        .check-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .result-panel {
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            display: none;
        }
        .result-panel.show { display: block; }
        .result-panel.success {
            background: linear-gradient(135deg, #ECFDF5, #D1FAE5);
            border: 2px solid #10B981;
        }
        .result-panel.partial {
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border: 2px solid #F59E0B;
        }
        .result-panel h3 { margin-bottom: 10px; }
        .result-panel.success h3 { color: #047857; }
        .result-panel.partial h3 { color: #92400E; }
        .result-panel p { line-height: 1.6; }
        .result-panel.success p { color: #065F46; }
        .result-panel.partial p { color: #78350F; }
        .real-fossil {
            background: #EFF6FF;
            border: 2px solid #3B82F6;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .real-fossil h4 { color: #1D4ED8; margin-bottom: 10px; }
        .real-fossil p { color: #1E40AF; font-size: 0.95em; line-height: 1.6; }
        .fossil-traits {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        .fossil-trait {
            background: #DBEAFE;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            color: #1E40AF;
        }
        .key-concept {
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border: 2px solid #F59E0B;
            border-radius: 12px;
            padding: 20px;
        }
        .key-concept h4 { color: #92400E; margin-bottom: 10px; }
        .key-concept p { color: #78350F; line-height: 1.6; font-size: 0.95em; }
        .score-display {
            text-align: center;
            font-size: 1.2em;
            color: #6D28D9;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü¶ï Transitional Form Designer</h1>
        <p class="subtitle">Predict what a transitional fossil would look like based on ancestor and descendant!</p>

        <div class="sim-container">
            <div class="scenario-selector">
                <h3>Choose an Evolutionary Transition</h3>
                <div class="scenario-grid">
                    <div class="scenario-card selected" onclick="selectScenario('fish-tetrapod')" id="scenario-fish-tetrapod">
                        <div class="title">üêü ‚Üí ü¶é Fish to Tetrapod</div>
                        <div class="desc">Water to land transition (~375 MYA)</div>
                    </div>
                    <div class="scenario-card" onclick="selectScenario('dino-bird')" id="scenario-dino-bird">
                        <div class="title">ü¶ñ ‚Üí üê¶ Dinosaur to Bird</div>
                        <div class="desc">Ground to air transition (~150 MYA)</div>
                    </div>
                    <div class="scenario-card" onclick="selectScenario('land-whale')" id="scenario-land-whale">
                        <div class="title">üêï ‚Üí üêã Land Mammal to Whale</div>
                        <div class="desc">Land to water transition (~50 MYA)</div>
                    </div>
                </div>
            </div>

            <div class="evolution-timeline" id="timeline">
                <div class="organism-box ancestor" id="ancestor">
                    <div class="emoji">üêü</div>
                    <div class="name">Lobe-finned Fish</div>
                    <div class="time">~385 million years ago</div>
                </div>
                <div class="arrow">‚Üí</div>
                <div class="organism-box transitional" id="transitional">
                    <div class="emoji">‚ùì</div>
                    <div class="name">Your Prediction</div>
                    <div class="time">Transitional Form</div>
                </div>
                <div class="arrow">‚Üí</div>
                <div class="organism-box descendant" id="descendant">
                    <div class="emoji">ü¶é</div>
                    <div class="name">Early Tetrapod</div>
                    <div class="time">~365 million years ago</div>
                </div>
            </div>

            <div class="designer-panel">
                <h3>üé® Design Your Transitional Form</h3>
                <p style="text-align: center; color: #6D28D9; margin-bottom: 20px;">
                    What features would an organism "in between" have? Select one option for each trait:
                </p>
                <div class="trait-grid" id="trait-grid"></div>
                <button class="check-btn" onclick="checkDesign()" id="check-btn">üîç Check My Prediction</button>
            </div>

            <div class="score-display" id="score-display"></div>

            <div class="result-panel" id="result-panel">
                <h3 id="result-title"></h3>
                <p id="result-text"></p>
            </div>

            <div class="real-fossil" id="real-fossil" style="display: none;">
                <h4>ü¶¥ The Real Transitional Fossil</h4>
                <p id="fossil-description"></p>
                <div class="fossil-traits" id="fossil-traits"></div>
            </div>

            <div class="key-concept">
                <h4>üí° Why Transitional Forms Matter</h4>
                <p>
                    Transitional fossils show us evolution "caught in the act." They have a MIX of features from
                    both ancestral and descendant groups. Scientists predicted these forms would exist BEFORE
                    finding them ‚Äî proving that evolution makes testable predictions! When you design a transitional
                    form, you're doing the same thing paleontologists do.
                </p>
            </div>
        </div>
    </div>

    <script>
        const scenarios = {
            'fish-tetrapod': {
                ancestor: { emoji: 'üêü', name: 'Lobe-finned Fish', time: '~385 million years ago' },
                descendant: { emoji: 'ü¶é', name: 'Early Tetrapod', time: '~365 million years ago' },
                transitional: { emoji: 'üêä', name: 'Tiktaalik', time: '~375 million years ago' },
                traits: [
                    {
                        name: 'Limbs',
                        options: [
                            { id: 'fins', icon: 'üèä', name: 'True fins', desc: 'Like fish - for swimming', correct: false },
                            { id: 'finlegs', icon: 'ü¶ø', name: 'Fin-legs', desc: 'Fins with wrist bones - can prop up', correct: true },
                            { id: 'legs', icon: 'ü¶µ', name: 'True legs', desc: 'Like lizards - for walking', correct: false }
                        ]
                    },
                    {
                        name: 'Breathing',
                        options: [
                            { id: 'gills', icon: 'ü´Å', name: 'Only gills', desc: 'Breathe underwater only', correct: false },
                            { id: 'both', icon: 'üîÑ', name: 'Gills AND lungs', desc: 'Can breathe in both', correct: true },
                            { id: 'lungs', icon: 'üí®', name: 'Only lungs', desc: 'Breathe air only', correct: false }
                        ]
                    },
                    {
                        name: 'Head/Neck',
                        options: [
                            { id: 'fused', icon: 'üêü', name: 'Head fused to body', desc: 'Like fish - no neck', correct: false },
                            { id: 'neck', icon: 'ü¶é', name: 'Moveable neck', desc: 'Can turn head side to side', correct: true },
                            { id: 'long', icon: 'ü¶ï', name: 'Long flexible neck', desc: 'Like a dinosaur', correct: false }
                        ]
                    },
                    {
                        name: 'Habitat',
                        options: [
                            { id: 'deep', icon: 'üåä', name: 'Deep ocean', desc: 'Open water swimmer', correct: false },
                            { id: 'shallow', icon: 'üèùÔ∏è', name: 'Shallow water/mud', desc: 'Swamps and shorelines', correct: true },
                            { id: 'land', icon: 'üèúÔ∏è', name: 'Fully terrestrial', desc: 'Lives on dry land', correct: false }
                        ]
                    }
                ],
                fossilDescription: 'Tiktaalik was discovered in 2004 in Arctic Canada. Scientists PREDICTED they would find a fish-tetrapod transitional form in 375-million-year-old rocks ‚Äî and they were right!',
                fossilTraits: ['Fins with wrist & finger bones', 'Gills AND primitive lungs', 'Flat head with eyes on top', 'Neck that could move', 'Ribs for supporting body on land']
            },
            'dino-bird': {
                ancestor: { emoji: 'ü¶ñ', name: 'Theropod Dinosaur', time: '~160 million years ago' },
                descendant: { emoji: 'üê¶', name: 'Modern Bird', time: 'Present day' },
                transitional: { emoji: 'ü¶Ö', name: 'Archaeopteryx', time: '~150 million years ago' },
                traits: [
                    {
                        name: 'Body Covering',
                        options: [
                            { id: 'scales', icon: 'ü¶é', name: 'Only scales', desc: 'Like reptiles', correct: false },
                            { id: 'feathers', icon: 'ü™∂', name: 'Feathers', desc: 'Full feather covering', correct: true },
                            { id: 'both', icon: 'üîÑ', name: 'Scales AND feathers', desc: 'Mix of both', correct: false }
                        ]
                    },
                    {
                        name: 'Mouth',
                        options: [
                            { id: 'teeth', icon: 'ü¶∑', name: 'Teeth in jaws', desc: 'Like dinosaurs', correct: true },
                            { id: 'beak', icon: 'üê¶', name: 'Toothless beak', desc: 'Like modern birds', correct: false },
                            { id: 'mixed', icon: 'üîÑ', name: 'Beak with teeth', desc: 'Partial beak, some teeth', correct: false }
                        ]
                    },
                    {
                        name: 'Forelimbs',
                        options: [
                            { id: 'arms', icon: 'üí™', name: 'Clawed arms', desc: 'For grabbing prey', correct: false },
                            { id: 'wings-claws', icon: 'ü¶á', name: 'Wings WITH claws', desc: 'Can fly but has finger claws', correct: true },
                            { id: 'wings', icon: 'üïäÔ∏è', name: 'True wings', desc: 'No claws, only for flying', correct: false }
                        ]
                    },
                    {
                        name: 'Tail',
                        options: [
                            { id: 'long', icon: 'ü¶é', name: 'Long bony tail', desc: 'Like dinosaurs', correct: true },
                            { id: 'short', icon: 'üê¶', name: 'Short pygostyle', desc: 'Fused tail bones like birds', correct: false },
                            { id: 'none', icon: '‚ùå', name: 'No tail', desc: 'Tail completely lost', correct: false }
                        ]
                    }
                ],
                fossilDescription: 'Archaeopteryx was found in Germany in 1861, just 2 years after Darwin published Origin of Species. It was exactly the dinosaur-bird transitional form his theory predicted!',
                fossilTraits: ['Full feathers on body and wings', 'Teeth in jaws (not a beak)', 'Wings with 3 clawed fingers', 'Long bony tail with feathers', 'Wishbone like birds']
            },
            'land-whale': {
                ancestor: { emoji: 'üêï', name: 'Pakicetus (Land mammal)', time: '~50 million years ago' },
                descendant: { emoji: 'üêã', name: 'Modern Whale', time: 'Present day' },
                transitional: { emoji: 'ü¶≠', name: 'Ambulocetus', time: '~48 million years ago' },
                traits: [
                    {
                        name: 'Legs',
                        options: [
                            { id: 'four', icon: 'üêï', name: 'Four walking legs', desc: 'Fully terrestrial', correct: false },
                            { id: 'paddle', icon: 'ü¶≠', name: 'Paddle-like legs', desc: 'Short legs with webbed feet', correct: true },
                            { id: 'flippers', icon: 'üêã', name: 'Flippers only', desc: 'No hind limbs visible', correct: false }
                        ]
                    },
                    {
                        name: 'Tail',
                        options: [
                            { id: 'dog', icon: 'üêï', name: 'Regular tail', desc: 'Like a dog tail', correct: false },
                            { id: 'otter', icon: 'ü¶¶', name: 'Thick muscular tail', desc: 'For swimming propulsion', correct: true },
                            { id: 'fluke', icon: 'üêã', name: 'Horizontal fluke', desc: 'Like modern whales', correct: false }
                        ]
                    },
                    {
                        name: 'Nostrils',
                        options: [
                            { id: 'front', icon: 'üêï', name: 'At front of snout', desc: 'Like land mammals', correct: false },
                            { id: 'middle', icon: 'ü¶≠', name: 'Partway up snout', desc: 'Moving toward top', correct: true },
                            { id: 'top', icon: 'üêã', name: 'On top of head', desc: 'Blowhole like whales', correct: false }
                        ]
                    },
                    {
                        name: 'Habitat',
                        options: [
                            { id: 'land', icon: 'üèúÔ∏è', name: 'Fully land-dwelling', desc: 'Lives on land only', correct: false },
                            { id: 'semi', icon: 'üèä', name: 'Semi-aquatic', desc: 'Rivers and shallow seas', correct: true },
                            { id: 'ocean', icon: 'üåä', name: 'Fully aquatic', desc: 'Open ocean only', correct: false }
                        ]
                    }
                ],
                fossilDescription: 'Ambulocetus ("walking whale") was discovered in Pakistan in 1994. Its name means "walking whale" because it could both walk on land AND swim ‚Äî exactly what we\'d expect in a land-to-water transition!',
                fossilTraits: ['Short paddle-like legs with webbed feet', 'Powerful tail for swimming', 'Nostrils partway up snout', 'Could walk on land awkwardly', 'Hunted like a crocodile in shallow water']
            }
        };

        let currentScenario = 'fish-tetrapod';
        let selections = {};

        function selectScenario(scenario) {
            currentScenario = scenario;
            selections = {};

            // Update UI
            document.querySelectorAll('.scenario-card').forEach(c => c.classList.remove('selected'));
            document.getElementById(`scenario-${scenario}`).classList.add('selected');

            // Update timeline
            const s = scenarios[scenario];
            document.getElementById('ancestor').innerHTML = `
                <div class="emoji">${s.ancestor.emoji}</div>
                <div class="name">${s.ancestor.name}</div>
                <div class="time">${s.ancestor.time}</div>
            `;
            document.getElementById('descendant').innerHTML = `
                <div class="emoji">${s.descendant.emoji}</div>
                <div class="name">${s.descendant.name}</div>
                <div class="time">${s.descendant.time}</div>
            `;
            document.getElementById('transitional').innerHTML = `
                <div class="emoji">‚ùì</div>
                <div class="name">Your Prediction</div>
                <div class="time">Transitional Form</div>
            `;

            // Build trait selectors
            buildTraitGrid();

            // Hide results
            document.getElementById('result-panel').classList.remove('show');
            document.getElementById('real-fossil').style.display = 'none';
            document.getElementById('score-display').textContent = '';
            document.getElementById('check-btn').disabled = false;
        }

        function buildTraitGrid() {
            const grid = document.getElementById('trait-grid');
            const s = scenarios[currentScenario];

            grid.innerHTML = s.traits.map((trait, i) => `
                <div class="trait-selector">
                    <h4>${trait.name}</h4>
                    <div class="trait-options">
                        ${trait.options.map(opt => `
                            <label class="trait-option" id="opt-${i}-${opt.id}" onclick="selectTrait(${i}, '${opt.id}')">
                                <input type="radio" name="trait-${i}" value="${opt.id}">
                                <span class="trait-icon">${opt.icon}</span>
                                <span class="trait-label">
                                    <div class="name">${opt.name}</div>
                                    <div class="desc">${opt.desc}</div>
                                </span>
                            </label>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function selectTrait(traitIndex, optionId) {
            selections[traitIndex] = optionId;

            // Update UI
            const s = scenarios[currentScenario];
            s.traits[traitIndex].options.forEach(opt => {
                const el = document.getElementById(`opt-${traitIndex}-${opt.id}`);
                el.classList.remove('selected');
            });
            document.getElementById(`opt-${traitIndex}-${optionId}`).classList.add('selected');
        }

        function checkDesign() {
            const s = scenarios[currentScenario];
            let correct = 0;
            let total = s.traits.length;

            // Check each trait
            s.traits.forEach((trait, i) => {
                trait.options.forEach(opt => {
                    const el = document.getElementById(`opt-${i}-${opt.id}`);
                    el.classList.remove('correct', 'incorrect', 'selected');

                    if (opt.correct) {
                        el.classList.add('correct');
                    }
                    if (selections[i] === opt.id && !opt.correct) {
                        el.classList.add('incorrect');
                    }
                });

                // Count correct
                const selected = selections[i];
                const correctOpt = trait.options.find(o => o.correct);
                if (selected === correctOpt.id) {
                    correct++;
                }
            });

            // Show score
            document.getElementById('score-display').textContent = `Score: ${correct}/${total} traits correct`;

            // Show result
            const resultPanel = document.getElementById('result-panel');
            resultPanel.classList.add('show');

            if (correct === total) {
                resultPanel.classList.remove('partial');
                resultPanel.classList.add('success');
                document.getElementById('result-title').textContent = 'üéâ Perfect Prediction!';
                document.getElementById('result-text').textContent =
                    `Amazing! You correctly predicted all ${total} traits of the transitional form. You thought like a paleontologist! Transitional forms have a MIX of ancestral and descendant features ‚Äî that's exactly what makes them "transitional."`;
            } else {
                resultPanel.classList.remove('success');
                resultPanel.classList.add('partial');
                document.getElementById('result-title').textContent = `üî¨ ${correct}/${total} Correct`;
                document.getElementById('result-text').textContent =
                    `Good effort! Remember: transitional forms have INTERMEDIATE features ‚Äî not fully ancestral, not fully descendant, but IN BETWEEN. The green options show what scientists actually found in the fossil record.`;
            }

            // Update transitional box
            document.getElementById('transitional').innerHTML = `
                <div class="emoji">${s.transitional.emoji}</div>
                <div class="name">${s.transitional.name}</div>
                <div class="time">${s.transitional.time}</div>
            `;

            // Show real fossil info
            const fossilPanel = document.getElementById('real-fossil');
            fossilPanel.style.display = 'block';
            document.getElementById('fossil-description').textContent = s.fossilDescription;
            document.getElementById('fossil-traits').innerHTML = s.fossilTraits.map(t =>
                `<span class="fossil-trait">‚úì ${t}</span>`
            ).join('');

            document.getElementById('check-btn').disabled = true;
        }

        // Initialize
        selectScenario('fish-tetrapod');
    </script>
</body>
</html>
